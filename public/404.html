<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Redirecting...</title>
    <script>
      // Single Page Apps for GitHub Pages - Simplified for OAuth callbacks
      (function (l) {
        // For GitHub Pages with base path like /prompt-gen-web/
        // This script redirects 404s to index.html with the path encoded

        // Get the number of path segments to keep (base path)
        var pathSegmentsToKeep = 1; // Keep 'prompt-gen-web'

        // Split pathname and get base + route
        var segments = l.pathname.slice(1).split('/');
        var basePath = segments.slice(0, pathSegmentsToKeep).join('/');
        var routePath = segments.slice(pathSegmentsToKeep).join('/');

        // Build the redirect URL
        var redirectUrl =
          l.protocol +
          '//' +
          l.hostname +
          (l.port ? ':' + l.port : '') +
          '/' +
          basePath +
          '/?/' +
          routePath;

        // Encode query parameters (&amp; â†’ ~and~)
        if (l.search) {
          redirectUrl += '&' + l.search.slice(1).replace(/&/g, '~and~');
        }

        // Preserve hash
        if (l.hash) {
          redirectUrl += l.hash;
        }

        // Debug logging
        console.log('[404.html] Redirecting from:', l.href);
        console.log('[404.html] Redirecting to:', redirectUrl);

        // Redirect
        l.replace(redirectUrl);
      })(window.location);
    </script>
  </head>
  <body>
    <!-- Padding to meet 512 byte minimum for IE -->
    <p>Redirecting to the app...</p>
  </body>
</html>
